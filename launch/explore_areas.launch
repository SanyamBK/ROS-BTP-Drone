<?xml version="1.0"?>
<launch>
  
  <!-- Launch Gazebo with the world and spawn all drones -->
  <include file="$(find multi_drone_sim)/launch/spawn_drones.launch">
    <arg name="gui" value="true"/>
  </include>
  
  <!-- Start the area exploration controller -->
  <node name="area_explorer" pkg="multi_drone_sim" type="area_explorer.py" output="screen">
    <param name="config_path" value="$(find multi_drone_sim)/config/areas.yaml"/>
  </node>
  
  <!-- ========================================== -->
  <!-- Phase 2: Research Implementation Nodes     -->
  <!-- ========================================== -->

  <!-- 1. Swarm Ranging (INFOCOM 2021) -->
  <node name="uwb_simulator" pkg="multi_drone_sim" type="uwb_simulator.py" output="screen" />
  
  <!-- Decentralized Localization (Running for Drone 0 as sample) -->
  <node name="swarm_loc_0" pkg="multi_drone_sim" type="swarm_localization.py" output="screen">
    <param name="drone_id" value="0"/>
  </node>

  <!-- 2. Energy-Aware Planning (ICRA 2024) -->
  <!-- Mobile Charging Station -->
  <node name="ugv_manager" pkg="multi_drone_sim" type="ugv_manager.py" output="screen" />
  
  <!-- Coordinated Planner -->
  <node name="energy_planner" pkg="multi_drone_sim" type="energy_planner.py" output="screen" />

</launch>
